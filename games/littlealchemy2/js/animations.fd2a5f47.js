(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["animations"],{"407f":function(t,n,i){"use strict";i.r(n);var e=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"animations"},[i("AnimationFinal"),i("AnimationFusion"),i("AnimationMixed"),i("AnimationNew"),i("AnimationHint"),t.shouldRenderEndAnimation?i("div",[i("AnimationEnd")],1):t._e(),t.shouldRenderCompletionAnimation?i("div",[i("AnimationCompletion")],1):t._e()],1)},s=[],a=i("9ab4"),o=i("6e95"),r=i("5c57"),c=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"final-animation-container"},t._l(t.elementsList,function(n){return i("FinalSingle",{key:n[0].elementId,attrs:{elements:n},on:{remove:t.onRemove,finish:t.onSingleFinished}})}),1)},h=[],l=i("1663"),d=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",t._l(t.elements,function(n){return i("div",{key:n.id,ref:"element",refInFor:!0,staticClass:"dematerialize",class:t.classes,style:t.getStyles(n.position)},[i("div",{staticClass:"core"}),i("div",{staticClass:"ring1"}),i("div",{staticClass:"ring2"})])}),0)},u=[],m=i("53b2"),f=i("7d61"),v=i("d257"),p=f["a"][m["b"]],A=o["a"].extend({name:"animation-final-single",props:{elements:{type:Array,required:!0}},computed:{id:function(){return this.elements[0].elementId},classes:function(){return{"js-active":!0}}},mounted:function(){var t=this,n=Object(v["s"])(this.$refs.element[0],function(n){n===p.delete&&t.onRemoveElement(),n===p.end&&t.onAnimationEnd()});this.$once("hook:beforeDestroy",n)},methods:{getStyles:function(t){return{top:t.y+"px",left:t.x+"px"}},onRemoveElement:function(){this.$emit("remove",this.id)},onAnimationEnd:function(){this.$emit("finish",this.id)}}}),_=A,x=i("2877"),C=Object(x["a"])(_,d,u,!1,null,null,null);C.options.__file="single.vue";var E=C.exports,w=o["a"].extend({name:"animation-final",components:{FinalSingle:E},computed:Object(a["a"])(Object(a["a"])({},Object(r["b"])({elementsIds:"animationFinalElements",finalElements:"workspaceFinal",exhaustedElements:"workspaceExhausted"})),{allElements:function(){return this.finalElements.concat(this.exhaustedElements)},elementsList:function(){var t=this;return this.elementsIds.map(function(n){return t.allElements.filter(function(t){var i=t.elementId;return i===n})}).filter(function(t){return!!t.length})}}),methods:{onRemove:function(t){this.$store.dispatch("animationFinalMiddle",t)},onSingleFinished:function(t){this.$store.dispatch("workspaceFinalRemove",t),this.$store.dispatch("workspaceExhaustedRemove",t),this.$store.dispatch("animationFinalFinished",t),l["a"].emit("ANIMATION_FINAL_SINGLE_END")}}}),b=w,N=Object(x["a"])(b,c,h,!1,null,null,null);N.options.__file="index.vue";var I=N.exports,g=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{directives:[{name:"animation-end",rawName:"v-animation-end",value:t.onAnimation,expression:"onAnimation"}],ref:"element",staticClass:"fusion",class:t.classes,style:t.styles,attrs:{id:"fusion"}},[i("div",{staticClass:"fusion-charge-ring"}),i("div",{staticClass:"fusion-core-dark"}),i("div",{staticClass:"fusion-core-light"}),i("div",{staticClass:"fusion-core-ring"})])},y=[],O=f["a"][m["c"]],j=o["a"].extend({name:"animation-fusion",data:function(){return{isRunning:!1,width:0,height:0}},computed:Object(a["a"])(Object(a["a"])({},Object(r["b"])({dimensions:"workspaceBoxDimensions",mixHasNewChildren:"mixHasNewChildren",isAnimationActive:"isAnimationActive",mixFather:"mixFather",mixMother:"mixMother"})),{isActive:function(){return this.isAnimationActive(m["c"])||this.isRunning},classes:function(){return{"js-active":this.isActive}},position:function(){if(!this.isActive||!this.mixFather||!this.mixMother)return{x:-500,y:0};var t=this.mixFather.position,n=this.mixMother.position,i=(t.x+n.x)/2+this.dimensions.width/2,e=(t.y+n.y)/2+this.dimensions.height/2;return{x:i,y:e}},styles:function(){var t=this.position,n=t.y-this.height/2,i=t.x-this.width/2;return{top:n+"px",left:i+"px"}}}),mounted:function(){var t=this;this.updateDimensions(),l["a"].onResize(function(){return t.updateDimensions()})},methods:{updateDimensions:function(){var t=Object(v["h"])(this.$refs.element),n=parseInt(t.width,10),i=parseInt(t.height,10);this.width=n,this.height=i},onAnimation:function(t){var n=t.animationName;n===O.middle&&this.onStartNext(),n===O.end&&this.onAnimationEnd()},onStartNext:function(){this.isRunning=!0,this.$store.dispatch("animationFusionMiddle")},onAnimationEnd:function(){this.isRunning=!1,this.mixHasNewChildren||this.$store.dispatch("animationReset")}}}),k=j,$=Object(x["a"])(k,g,y,!1,null,null,null);$.options.__file="fusion.vue";var S=$.exports,F=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",t._l(t.animations,function(n){return i("MixedItem",{key:n.id,attrs:{children:n.children,position:n.position},on:{"animation-end":function(i){return t.onAnimationEnd(n.id)}}})}),1)},D=[],B=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"already-made-container",class:t.classes,style:t.parentStyles},t._l(t.children,function(n,e){return i("img",{key:n,ref:"icons",refInFor:!0,staticClass:"already-done",class:t.childClasses(e),attrs:{alt:t.getName(n),src:t.iconUrl(n)}})}),0)},R=[],K=i("fd41"),M=o["a"].extend({name:"animation-mixed-item",props:{position:Object,children:Array},data:function(){return{isActive:!1}},computed:{parentStyles:function(){return{top:this.position.y+"px",left:this.position.x+"px"}},classes:function(){return{"js-active":this.isActive}}},mounted:function(){var t=this;this.$nextTick(function(){return t.setup()})},methods:{setup:function(){var t=this;Object(v["w"])(this.$el);var n=this.$refs.icons;if(n&&n.length){var i=Object(v["q"])(n[0],function(){t.$emit("animation-end"),i()});window.setTimeout(function(){t.isActive=!0},15)}},iconUrl:function(t){return Object(K["a"])(t)},getName:function(t){var n=this.$store.getters.elementById(t);return n?n.name:""},childClasses:function(t){return this.isActive?"already-made-"+this.children.length+"-"+(t+1):""}}}),H=M,T=Object(x["a"])(H,B,R,!1,null,null,null);T.options.__file="item.vue";var L=T.exports,Y=o["a"].extend({name:"animation-mixed",components:{MixedItem:L},data:function(){return{animations:[]}},computed:Object(a["a"])({},Object(r["b"])(["mixFather","mixChildren"])),mounted:function(){var t=this;l["a"].on("ANIMATION_MIXED_START",function(){return t.addAnimation()})},methods:{addAnimation:function(){if(this.mixFather){var t=this.mixChildren.map(function(t){return t.id}),n=Object(a["a"])({},this.mixFather.position);this.animations.push({id:Date.now(),children:t,position:n})}},onAnimationEnd:function(t){this.animations=this.animations.filter(function(n){var i=n.id;return i!==t})}}}),P=Y,U=Object(x["a"])(P,F,D,!1,null,null,null);U.options.__file="index.vue";var W=U.exports,q=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{directives:[{name:"animation-end",rawName:"v-animation-end",value:t.onAnimation,expression:"onAnimation"}],staticClass:"new-element",class:t.classes,attrs:{id:t.ANIMATION_NEW_ID},on:{click:t.checkNext}},[i("div",{staticClass:"background"}),t._m(0),i("div",{staticClass:"new-element-image-container"},[t.current?i("img",{attrs:{src:t.iconUrl,alt:t.name}}):t._e()]),i("div",{staticClass:"absolute-center outer-name"},[t.isActive?i("div",{staticClass:"name"},[i("span",[t._v(t._s(t.name))])]):t._e()]),i("div",{staticClass:"absolute-center"},[i("div",{staticClass:"description"},[t._v(t._s(t.description))]),i("div",{class:t.pokiClasses,attrs:{id:"poki-static-banner"},on:{click:function(t){t.stopPropagation()}}})]),t.isNewBaseActive?i("NewBaseAnimation",{attrs:{active:t.isNewBaseActive},on:{hidden:t.onNewBaseHidden}}):t._e()],1)},z=[function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"new-element-rays-container"},[i("div",{staticClass:"rays"})])}],J=i("b047"),G=i.n(J),X=i("0347"),Q=i("cd57"),V=i("e238"),Z=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{directives:[{name:"animation-end",rawName:"v-animation-end",value:t.onAnimation,expression:"onAnimation"}],staticClass:"new-base-element",class:t.classes,on:{click:t.hide}},[t._m(0)])},tt=[function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"new-item-unlocked"},[t._v("\n    new item"),i("br"),t._v("revealed!\n  ")])}],nt=f["a"][m["g"]],it=250,et=o["a"].extend({name:"animation-new-base",props:{active:Boolean},data:function(){return{timestamp:0,hiding:!1}},computed:{classes:function(){return{"js-active":this.active&&!this.hiding}}},mounted:function(){this.initKeysListeners()},beforeDestroy:function(){this.destroyKeysListeners()},methods:{onAnimation:function(t){var n=t.animationName;n===nt.baseShow&&this.onShown(),n===nt.baseHide&&this.onHidden()},initKeysListeners:function(){this.hide=this.hide.bind(this),l["a"].on("KEY_ESC",this.hide),l["a"].on("KEY_SPACE",this.hide),l["a"].on("KEY_ENTER",this.hide)},destroyKeysListeners:function(){l["a"].off("KEY_ESC",this.hide),l["a"].off("KEY_SPACE",this.hide),l["a"].off("KEY_ENTER",this.hide)},hide:function(){this.active&&!this.hiding&&(this.timestamp+it>Date.now()||(this.hiding=!0))},onShown:function(){this.timestamp=Date.now()},onHidden:function(){this.active&&(this.hiding=!1,this.timestamp=0,this.$emit("hidden"))}}}),st=et,at=Object(x["a"])(st,Z,tt,!1,null,null,null);at.options.__file="base.vue";var ot=at.exports,rt=f["a"][m["g"]],ct=300,ht=Object(X["a"])(navigator.userAgent).any,lt=o["a"].extend({name:"animation-new",components:{NewBaseAnimation:ot},data:function(){return{timestamp:0,currentIndex:0,hide:!1,hideContent:!1,isNewBaseActive:!1}},computed:Object(a["a"])(Object(a["a"])({},Object(r["b"])(["isAnimationActive","mixChildren","elementIsNewlyDiscovered","elementById","descriptionById"])),{isActive:function(){return this.isAnimationActive(m["g"])||this.hide},children:function(){var t=this;return this.mixChildren.filter(function(n){var i=n.id;return t.elementIsNewlyDiscovered(i)})},hasElements:function(){return this.currentIndex+1<this.children.length},currentId:function(){return this.children.length?this.children[this.currentIndex].id:""},current:function(){return this.elementById(this.currentId)},name:function(){return this.current?this.current.name:""},description:function(){return this.current?this.descriptionById(this.currentId):""},iconUrl:function(){return Object(K["a"])(this.currentId)},isBase:function(){return!!this.current&&this.current.base},classes:function(){return{"js-active":this.isActive||this.hide,"js-hide-content":this.hideContent,"js-background-out":this.hide}},pokiClasses:function(){return{"poki-ad":!0,"poki-ad-mobile":ht}},ANIMATION_NEW_ID:function(){return Q["a"]}}),mounted:function(){this.onContentHidden=G()(this.onContentHidden.bind(this),250,{leading:!0,trailing:!1}),this.initKeysListeners()},watch:{isActive:function(t){t&&(this.timestamp=Date.now(),V["a"].displayStaticAd())}},methods:{initKeysListeners:function(){var t=this;l["a"].on("KEY_ESC",function(){return t.checkNext()}),l["a"].on("KEY_SPACE",function(){return t.checkNext()}),l["a"].on("KEY_ENTER",function(){return t.checkNext()})},checkNext:function(){!this.isActive||this.hide||this.isNewBaseActive||this.timestamp+ct>Date.now()||(this.hasElements?this.hideContent=!0:(this.hide=!0,this.$store.dispatch("animationNewEnding",{removeParents:!1})))},onAnimation:function(t){var n=t.animationName;n===rt.start&&this.onAnimationStart(),n===rt.hideContent&&this.onContentHidden(),n===rt.showContent&&this.onContentShow(),n===rt.end&&this.onAnimationEnd()},onAnimationStart:function(){this.timestamp=Date.now()},onContentHidden:function(){this.hideContent&&this.hasElements&&(this.currentIndex++,this.isBase&&(this.isNewBaseActive=!0))},onContentShow:function(){this.hideContent&&!this.isNewBaseActive&&(this.showContent(),l["a"].emit("ANIMATION_NEW_POP"))},onNewBaseHidden:function(){this.isNewBaseActive=!1,this.showContent(),l["a"].emit("ANIMATION_NEW_POP")},showContent:function(){this.hideContent=!1,this.timestamp=Date.now()},onAnimationEnd:function(){this.hide=!1,this.$store.dispatch("animationReset"),this.$store.dispatch("animationNewEnd"),l["a"].emit("ANIMATION_NEW_END"),this.currentIndex=0,this.timestamp=0,this.hideContent=!1,V["a"].destroyStaticAd()}}}),dt=lt,ut=Object(x["a"])(dt,q,z,!1,null,null,null);ut.options.__file="index.vue";var mt=ut.exports,ft=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.hasActiveHint,expression:"hasActiveHint"},{name:"animation-end",rawName:"v-animation-end",value:t.onAnimation,expression:"onAnimation"}],staticClass:"new-element",class:t.classes,on:{click:t.onClick}},[i("div",{staticClass:"background"}),t._m(0),i("div",{staticClass:"new-element-image-container"},[t.isActive?i("img",{attrs:{src:t.getIconUrl(t.elementId),alt:t.name}}):t._e()]),i("div",{staticClass:"absolute-center outer-name"},[t.isActive?i("div",{staticClass:"name"},[i("span",[t._v(t._s(t.name))])]):t._e()]),t._m(1)])},vt=[function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"new-element-rays-container"},[i("div",{staticClass:"rays"})])},function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"absolute-center"},[i("div",{staticClass:"description"},[t._v("\n      Now... can you create it with the items you already discovered?\n    ")])])}],pt=f["a"][m["g"]],At=250,_t=o["a"].extend({name:"animation-hint",data:function(){return{hide:!1,timestamp:0}},computed:Object(a["a"])(Object(a["a"])({},Object(r["b"])(["isAnimationActive","hintCurrent","elementById"])),{isActive:function(){return this.isAnimationActive(m["f"])||this.hide},hasActiveHint:function(){return null!==this.hintCurrent.elementId},elementId:function(){return this.hintCurrent.elementId},element:function(){return this.elementById(this.elementId)},name:function(){return this.element?this.element.name:""},classes:function(){return{"js-active":this.isActive||this.hide,"js-background-out":this.hide}}}),mounted:function(){this.initKeysListeners()},methods:{initKeysListeners:function(){var t=this;l["a"].on("KEY_ESC",function(){return t.onClick()}),l["a"].on("KEY_SPACE",function(){return t.onClick()})},onClick:function(){this.isActive&&(this.timestamp+At>Date.now()||(this.hide=!0))},getIconUrl:function(t){return Object(K["a"])(t)},onAnimation:function(t){var n=t.animationName;n===pt.start&&this.onAnimationStart(),n===pt.end&&this.onAnimationEnd()},onAnimationStart:function(){this.timestamp=Date.now()},onAnimationEnd:function(){this.hide=!1,this.$store.dispatch("animationReset"),this.$store.dispatch("hintCurrentClear"),l["a"].emit("HINT_ANIMATION_END"),this.timestamp=0}}}),xt=_t,Ct=Object(x["a"])(xt,ft,vt,!1,null,null,null);Ct.options.__file="hint.vue";var Et=Ct.exports,wt=o["a"].extend({name:"animations",components:{AnimationFinal:I,AnimationFusion:S,AnimationMixed:W,AnimationNew:mt,AnimationHint:Et,AnimationEnd:function(){return i.e("end-animation").then(i.bind(null,"0e2c"))},AnimationCompletion:function(){return i.e("completion-animation").then(i.bind(null,"ee39"))}},computed:Object(a["a"])(Object(a["a"])({},Object(r["b"])(["hasAllElements","hasAllExhausted"])),{shouldRenderEndAnimation:function(){return this.hasAllElements},shouldRenderCompletionAnimation:function(){return this.hasAllExhausted}})}),bt=wt,Nt=Object(x["a"])(bt,e,s,!1,null,null,null);Nt.options.__file="index.vue";n["default"]=Nt.exports}}]);
//# sourceMappingURL=animations.fd2a5f47.js.map