"use strict";(self.webpackChunkcrazygames_gameframe=self.webpackChunkcrazygames_gameframe||[]).push([[2386],{92386:(t,e,n)=>{n.r(e),n.d(e,{default:()=>$});var i=n(47313),o=n(63779),s=n(90831),r=n(13751),a=n(77626),l=n(42379),c=n(32606),d=n(85541),u=n(46417);const h=i.memo((t=>(0,u.jsx)(d.Z,{...t,width:"20",height:"20",viewBox:"0 0 20 20",children:(0,u.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 2C5.58172 2 2 5.58172 2 10C2 14.4183 5.58172 18 10 18C14.4183 18 18 14.4183 18 10C18 5.58172 14.4183 2 10 2ZM0 10C0 4.47715 4.47715 0 10 0C15.5228 0 20 4.47715 20 10C20 15.5228 15.5228 20 10 20C4.47715 20 0 15.5228 0 10ZM10.0001 6C8.52833 6 7.47159 6.70623 7.13224 7.4263C6.89681 7.92589 6.30095 8.14002 5.80136 7.90458C5.30178 7.66914 5.08764 7.07329 5.32308 6.5737C6.08197 4.96338 7.98852 4 10.0001 4C11.3001 4 12.5155 4.39395 13.4285 5.07868C14.3418 5.76364 15.0001 6.78625 15.0001 8C15.0001 10.0693 13.166 11.5082 11.1827 11.8887C11.11 11.9026 11.0522 11.9386 11.0206 11.972C11.0064 11.9871 11.0014 11.9974 11.0002 12.0001C11.0002 12.0003 11.0001 12.0004 11.0001 12.0005C10.9998 12.5526 10.5522 13 10.0001 13C9.44777 13 9.00005 12.5523 9.00005 12C9.00005 10.8579 9.90969 10.0964 10.8059 9.92451C12.2788 9.64194 13.0001 8.72954 13.0001 8C13.0001 7.5569 12.7629 7.0795 12.2285 6.67868C11.6937 6.27763 10.9092 6 10.0001 6ZM9 15C9 14.4477 9.44771 14 10 14H10.01C10.5623 14 11.01 14.4477 11.01 15C11.01 15.5523 10.5623 16 10.01 16H10C9.44771 16 9 15.5523 9 15Z"})}))),g=(0,l.ZP)("div")((t=>{let{theme:e}=t;return{display:"flex",width:"100%",justifyContent:"center",marginBottom:20,[e.breakpoints.down(360)]:{marginBottom:0}}})),p=(0,l.ZP)("div")((t=>{let{theme:{breakpoints:e}}=t;return{alignItems:"center",color:c.D.white[80],display:"flex",fontSize:16,fontWeight:700,fontFamily:"Nunito",padding:"4px 12px",[e.down(360)]:{fontSize:12}}})),x=(0,l.ZP)("div")((t=>{let{theme:{breakpoints:e}}=t;return{alignItems:"center",background:"rgba(41, 31, 84, 0.8)",backdropFilter:"blur(12px)",color:c.D.white[80],cursor:"pointer",display:"flex",fontSize:16,fontWeight:700,justifyContent:"center",padding:12,[e.down(360)]:{fontSize:12,padding:6,"& span":{padding:"2px 6px"}},"&:hover":{background:"#41327ACC","& span":{background:c.D.white[90],color:c.D.black[50]}}}})),f=(0,l.ZP)("div")((t=>{let{theme:{spacing:e,breakpoints:n}}=t;return{fontSize:14,fontWeight:800,background:"rgba(104, 66, 255, 0.70)",backdropFilter:"blur(15px)",color:c.D.white[100],width:"100vw",display:"flex",justifyContent:"center",alignItems:"center",padding:e(1),transition:"opacity 0.3s ease-out","& button":{color:c.D.brand[100],fontSize:14},"& svg":{fill:"#fff",width:20,height:20},[n.down(360)]:{fontSize:12,"& button":{fontSize:13},"& svg":{width:17,height:17}}}})),m=(0,l.ZP)("span")({borderRadius:30,border:"1px solid rgba(255, 255, 255, 0.30)",padding:"4px 12px",marginLeft:"8px"}),j=(0,l.ZP)("div",{shouldForwardProp:t=>"isBottomPadded"!==t})((t=>{let{isBottomPadded:e}=t;return{alignItems:"center",background:"rgba(51, 14, 27, 0.80)",backdropFilter:"blur(12px)",color:c.D.alert[60],cursor:"pointer",display:"flex",fontSize:14,fontWeight:700,justifyContent:"center",padding:"12px",...e&&{marginBottom:50},"&:hover":{background:"rgba(104, 24, 53, 0.80)",backdropFilter:"blur(12px)","& span":{background:c.D.white[90],color:c.D.black[50]}}}})),b=(0,l.ZP)(h)({width:16,marginLeft:6,color:c.D.white[100],"&:hover":{cursor:"pointer",color:c.D.white[60]},"&:active":{color:c.D.white[20]}});var w=n(72071),y=n(8226),C=n(58684),v=n(82259);const k=t=>{let{title:e,body:n,action:i}=t;return(0,u.jsx)(C.u_,{children:(0,u.jsxs)(C.hz,{sx:{backgroundColor:c.D.black[70],width:"min(600px, 70vw)",pb:2.5},children:[(0,u.jsx)(C.FK,{onClick:()=>i(!1),children:(0,u.jsx)(y.Z,{sx:{height:20,width:20,mt:"5px"}})}),(0,u.jsx)("h2",{style:{marginBlock:0,fontSize:24,fontWeight:800,marginBottom:16,marginTop:20,paddingLeft:10,lineHeight:"130%"},children:e}),(0,u.jsx)("p",{style:{marginBlock:0,fontSize:14,fontWeight:400,color:c.D.white[60]},children:n}),(0,u.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:15},children:(0,u.jsx)(v.S,{variant:"contained",color:"purple",height:40,style:{minWidth:150,fontSize:14},onClick:()=>i(!1),children:(0,u.jsx)(a.Z,{id:"aps.tooltip.button"})})})]})})},S=()=>{const{userId:t}=(0,i.useContext)(o.NL),{gameLoadStatus:e}=(0,i.useContext)(w.r),[n,s]=i.useState(!1);return t&&"NOT_STARTED"===e?n?(0,u.jsx)(k,{title:(0,u.jsx)(a.Z,{id:"aps.tooltip.crazyAccount.title"}),body:(0,u.jsx)(a.Z,{id:"aps.tooltip.crazyAccount.body"}),action:s}):(0,u.jsx)(g,{children:(0,u.jsxs)(p,{children:[(0,u.jsx)("div",{children:(0,u.jsx)(a.Z,{id:"aps.info.base",values:{highlight:(0,u.jsx)("span",{style:{color:c.D.success[100]},children:(0,u.jsx)(a.Z,{id:"aps.info.base.enabled"})})}})}),(0,u.jsx)(b,{onClick:()=>s(!0)})]})}):null};var Z=n(16157),D=n(18104),z=n(38459),T=n(49889),P=n(87308),E=n(74082),I=n(13869),L=n(43063);const O="apsnotice_hidden_day";function A(t){L.Z.getInstance().sendEvent({type:"notificationAction",notificationSource:"dont-lose-progress",action:t})}const B=()=>{const[t,e]=i.useState(!1),{gameLoadStatus:n}=(0,i.useContext)(w.r),{gfInit:o}=(0,i.useContext)(I.R4),s=(0,P.uo)(),r=i.useRef(null),[l,d]=i.useState(!1),[h,g]=i.useState(!1),p=E.m.Instance.getItem(O),b=p?Date.now()-Number(p):null,k="GAME_LOADED"===n&&!l&&!(!!b&&b<864e5),S=()=>{d(!0);const t=Date.now();E.m.Instance.setItem(O,`${t}`)};i.useEffect((()=>{t&&A("shown")}),[t]),i.useEffect((()=>{let t,e;if(!s)return;const n=new IntersectionObserver((n=>{let[i]=n;i.isIntersecting&&!h&&(t||(t=window.setTimeout((()=>{g(!0),e||(e=window.setTimeout((()=>{g(!1)}),7e3))}),2e3)))}));return r&&r.current&&n.observe(r.current),function(){n.disconnect(),t&&window.clearTimeout(t),e&&window.clearTimeout(e)}}),[s,r,n]),i.useEffect((()=>{var t;o&&null!==(t=o.data)&&void 0!==t&&t.wasUserLoggedIn&&e(!0)}),[o]);const L=()=>{(0,T.A)()};return"GAME_LOADED"!==n||s?t&&"NOT_STARTED"===n&&!s?(0,u.jsx)(C.u_,{hideBackdrop:!0,children:(0,u.jsxs)(C.hz,{sx:{backgroundColor:c.D.black[70],width:250,pb:2.5},children:[(0,u.jsx)(Z.Z,{sx:{position:"absolute",width:"30px",height:"30px",right:"8px",top:"8px",backgroundColor:c.D.black[90],borderRadius:"28px","&:hover":{cursor:"pointer",backgroundColor:c.D.black[80]},"&:active":{backgroundColor:c.D.black[70]}},onClick:()=>{A("closed"),e(!1)},children:(0,u.jsx)(y.Z,{sx:{height:20,width:20,mt:"5px"}})}),(0,u.jsx)("div",{style:{marginTop:12,marginBottom:10,height:121,width:"100%"},children:(0,u.jsx)("img",{src:(0,z.Z)("/gameframe/astronaut.svg"),alt:"Don't lose your progress!"})}),(0,u.jsx)("h2",{style:{marginBlock:0,fontSize:16,fontWeight:700,marginBottom:4,marginTop:10},children:(0,u.jsx)(a.Z,{id:"aps.userWasLogged.title"})}),(0,u.jsx)("p",{style:{marginBlock:0,fontSize:14,fontWeight:400,color:c.D.white[60]},children:(0,u.jsx)(a.Z,{id:"aps.userWasLogged.text"})}),(0,u.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:15},children:[(0,u.jsx)(v.S,{variant:"outlined",color:"white",height:34,style:{minWidth:100,fontSize:14},onClick:()=>{e(!1),A("ignored")},children:(0,u.jsx)(a.Z,{id:"aps.userWasLogged.ignore"})}),(0,u.jsx)(v.S,{variant:"contained",height:34,style:{minWidth:100,fontSize:14},onClick:()=>{L(),A("login")},children:(0,u.jsx)(a.Z,{id:"aps.userWasLogged.login"})})]})]})}):"NOT_STARTED"===n?(0,u.jsx)(x,{onClick:L,children:(0,u.jsxs)("div",{children:[(0,u.jsx)(a.Z,{id:"aps.info.loginPrompt"}),(0,u.jsx)(m,{children:(0,u.jsx)(a.Z,{id:"aps.info.loginPrompt.cta"})})]})}):"POST_PREROLL"===n?(0,u.jsx)(j,{isBottomPadded:s,onClick:L,children:(0,u.jsxs)("div",{children:[(0,u.jsx)(a.Z,{id:"aps.splash.loginPrompt"}),(0,u.jsx)(m,{children:(0,u.jsx)(a.Z,{id:"aps.splash.loginPrompt.cta"})})]})}):k?(0,u.jsxs)(f,{style:{opacity:h?1:0},ref:r,children:[(0,u.jsxs)("div",{style:{display:"flex"},children:[(0,u.jsx)(a.Z,{id:"aps.info.loginPrompt"}),(0,u.jsx)(v.S,{variant:"contained",color:"white",height:20,onClick:L,sx:{ml:1},children:(0,u.jsx)(a.Z,{id:"aps.info.loginPrompt.cta"})})]}),(0,u.jsx)(D.Z,{onClick:S,disableRipple:!0,sx:{position:"absolute",right:0},children:(0,u.jsx)(y.Z,{})})]}):null:null},N=()=>{const{gameLoadStatus:t}=(0,i.useContext)(w.r),e=(0,P.uo)(),[n,o]=i.useState(!1);return"NOT_STARTED"!==t||e?null:n?(0,u.jsx)(k,{title:(0,u.jsx)(a.Z,{id:"aps.tooltip.account.title"}),body:(0,u.jsx)(a.Z,{id:"aps.tooltip.account.body"}),action:o}):(0,u.jsx)(g,{children:(0,u.jsxs)(p,{children:[(0,u.jsx)("div",{children:(0,u.jsx)(a.Z,{id:"aps.info.ingame",values:{highlight:(0,u.jsx)("span",{style:{color:c.D.warning[100]},children:(0,u.jsx)(a.Z,{id:"aps.info.ingame.highlight"})})}})}),(0,u.jsx)(b,{onClick:()=>o(!0)})]})})};var _=n(46604),R=n(19314);const W=()=>{const{gameLoadStatus:t}=(0,i.useContext)(w.r),[e,n]=i.useState(!1);return"NOT_STARTED"!==t?null:e?(0,u.jsx)(k,{title:(0,u.jsx)(a.Z,{id:"aps.tooltip.locally.title"}),body:(0,u.jsx)(a.Z,{id:"aps.tooltip.locally.body"}),action:n}):(0,u.jsx)(g,{children:(0,u.jsxs)(p,{children:[(0,u.jsx)("div",{children:(0,u.jsx)(a.Z,{id:"aps.info.base",values:{highlight:(0,u.jsx)("span",{style:{color:c.D.warning[100]},children:(0,u.jsx)(a.Z,{id:"aps.info.base.local"})})}})}),(0,u.jsx)(b,{onClick:()=>n(!0)})]})})},F=t=>{if(_.Z.isEmbeddedExternally()||(0,R.U)())return!1;switch(t){case"yes":return(()=>{const t=(0,s.NI)().loader;return"iframe"===t?(0,r.x3)():"ruffle"===t?(0,r.o5)():!!s.Fw.includes(t)&&(0,r.v9)()})();case"in-game-auto-login":case"sdkps":return!0;default:return!1}},$=()=>{const{userId:t,hasUserLoaded:e}=(0,i.useContext)(o.NL),n=(0,s.NI)().aps;return"ingame"===n?(0,u.jsx)(N,{}):"no"===n?(0,u.jsx)(W,{}):F(n)&&e?t?(0,u.jsx)(S,{}):(0,u.jsx)(B,{}):null}},13751:(t,e,n)=>{n.d(e,{$s:()=>g,Qg:()=>D,VB:()=>f,VO:()=>Z,ZZ:()=>z,bs:()=>p,i2:()=>h,o5:()=>w,v9:()=>y,vz:()=>C,x3:()=>b,z6:()=>x,zg:()=>k});var i=n(90831),o=n(74082),s=n(19314),r=n(46604),a=n(22870),l=n(74309);const c=window.location.search.indexOf("aps_debug=true")>=0,d=new a.Yd(D()).withPrefix("[APS]"),u="game-files.crazygames.com",h=()=>3e4,g=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t?1e4:7e3},p="1.4.11";function x(t,e,n){const o=function(t){const e=(0,i.NI)();if("ruffle"===t)return`https://${e.gameSlug}.${u}`;{const t=e.loaderOptions.url;return new URL(t).origin}}(e);let s=`${`${o}/gameframe/up-aps/aps-script-${p}.html`}?game_slug=${t}`;return n&&(s+=`&sync_timer_ms=${n}`),c&&(s+="&debug=true"),s}function f(){const{apsSyncTimerMs:t,categoryEnSlug:e}=(0,i.NI)();return t||("clicker"===e?3e4:1e3)}function m(t){const e=["files.crazygames.com","files.dev-crazygames.be",u].some((e=>t.includes(e)));return!!(j()&&o.m.Instance.hasWorkingLocalStorage()&&e)}function j(){const t=(0,i.NI)(),e=t.aps;return!!((!e||"yes"===e)&&!t.forceDisableAPS&&!(0,s.U)()&&!r.Z.isEmbeddedExternally())}function b(){return m((0,i.NI)().loaderOptions.url)}function w(){return m((0,i.NI)().loaderOptions.swfLocation)}function y(){const t=window.hasOwnProperty("indexedDB");return!!(j()&&t)}async function C(t){let e=null;for(let i=0;i<3;i++)try{return await S(t)}catch(n){e=n}throw e}let v=null;function k(){var t;null===(t=v)||void 0===t||t.abort()}async function S(t){try{v=new AbortController;const n=await fetch(t,{method:"GET",signal:v.signal}),i=await n.text();if(!n.ok){if(i&&404===n.status){var e;const t=(new window.DOMParser).parseFromString(i,"application/xml");if("NoSuchKey"===(null===(e=t.getElementsByTagName("Code")[0])||void 0===e?void 0:e.textContent))return{result:"empty"}}throw new l.k(i,!0,n.status)}return{gameData:i,result:"ok"}}catch(n){if("AbortError"===(null===n||void 0===n?void 0:n.name))return{result:"aborted"};const t=(null===n||void 0===n?void 0:n.message)||"unknown error";throw new l.k(t,!1)}}function Z(t){D()&&d.debug(`${t}`)}function D(){return c}function z(t,e){return e?"firebase-timeout":"waitingForGameDataUrlFromUP"===t?"up-timeout":"fetchingGameDataFromSignedUrl"===t?"fetch-timeout":"timeout"}},74309:(t,e,n)=>{n.d(e,{k:()=>i});class i extends Error{constructor(t,e,n){super(`Fetch error:${n}`),this.originalError=void 0,this.fetchResolved=void 0,this.statusCode=void 0,this.originalError=t.slice(0,100),this.fetchResolved=e,this.statusCode=n,Object.setPrototypeOf(this,i.prototype)}}}}]);