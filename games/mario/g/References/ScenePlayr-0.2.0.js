var ScenePlayr;
(function(f){var g=function(){function a(b){void 0===b&&(b={});this.cutscenes=b.cutscenes||{};this.cutsceneArguments=b.cutsceneArguments||[]}a.prototype.getCutscenes=function(){return this.cutscenes};a.prototype.getCutscene=function(){return this.cutscene};a.prototype.getOtherCutscene=function(b){return this.cutscenes[b]};a.prototype.getRoutine=function(){return this.routine};a.prototype.getOtherRoutine=function(b){return this.cutscene.routines[b]};a.prototype.getCutsceneName=function(){return this.cutsceneName};a.prototype.getCutsceneSettings=
function(){return this.cutsceneSettings};a.prototype.addCutsceneSetting=function(b,a){this.cutsceneSettings[b]=a};a.prototype.startCutscene=function(b,a,c){void 0===a&&(a={});if(!b)throw Error("No name given to ScenePlayr.playScene.");this.cutsceneName&&this.stopCutscene();this.cutscene=this.cutscenes[b];this.cutsceneName=b;this.cutsceneSettings=a||{};this.cutsceneSettings.cutscene=this.cutscene;this.cutsceneSettings.cutsceneName=b;this.cutsceneArguments.push(this.cutsceneSettings);this.cutscene.firstRoutine&&
this.playRoutine.apply(this,[this.cutscene.firstRoutine].concat(c))};a.prototype.bindCutscene=function(b,a,c){return this.startCutscene.bind(this,b,c)};a.prototype.stopCutscene=function(){this.cutsceneSettings=this.cutsceneName=this.cutscene=this.routine=void 0;this.cutsceneArguments.pop()};a.prototype.playRoutine=function(b){for(var a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];if(!this.cutscene)throw Error("No cutscene is currently playing.");if(!this.cutscene.routines[b])throw Error("The "+
this.cutsceneName+" cutscene does not contain a "+b+" routine.");c=this.cutsceneArguments.slice();c.push.apply(c,a);this.routine=this.cutscene.routines[b];this.cutsceneSettings.routine=this.routine;this.cutsceneSettings.routineName=b;this.cutsceneSettings.routineArguments=a;this.routine.apply(this,c)};a.prototype.bindRoutine=function(a){for(var d=[],c=1;c<arguments.length;c++)d[c-1]=arguments[c];return(e=this.playRoutine).bind.apply(e,[this,a].concat(d));var e};return a}();f.ScenePlayr=g})(ScenePlayr||
(ScenePlayr={}));